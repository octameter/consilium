var util={zeit:function(a,b){var c=b?new Date(b):new Date,d=c.getMilliseconds()<10?"0"+c.getMilliseconds():c.getMilliseconds(),e=c.getSeconds()<10?"0"+c.getSeconds():c.getSeconds(),f=c.getMinutes()<10?"0"+c.getMinutes():c.getMinutes(),g=c.getHours()<10?"0"+c.getHours():c.getHours(),h=c.getDate()<10?"0"+c.getDate():c.getDate(),i=c.getMonth()<9?"0"+(c.getMonth()+1):c.getMonth()+1,j=c.getFullYear();a=="yyyy-MM-dd"&&console.log(j+"-"+i+"-"+h);switch(a){case"yyyy-MM-ddThh:mm.ss.ms":return j+"-"+i+"-"+h+"T"+g+":"+f+":"+e+"."+d;case"yyyy-MM-dd hh:mm.ss":return j+"-"+i+"-"+h+" "+g+":"+f+":"+e;case"yyyy-MM-dd":return j+"-"+i+"-"+h;case"dd.mm.yyyy hh:mm":return h+"."+i+"."+j+" "+g+":"+f;case"dd.MM.yyyy hh:mm":return h+"."+i+"."+j+" "+g+":"+f;case"dd.mm.yyyy":return h+"."+i+"."+j;case"dd.MM":return h+"."+i;case"hh:mm":return g+":"+f;case"dd":return h;case"ddInMonth":return(new Date(j,i,0)).getDate();case"MM":return i;case"yyyy":return j;case"hh":return g;case"mm":return f;case"dawn":return c.setHours(0,0,0,0),c.getTime();case"weekend":return c.getDay()==0||c.getDay()==6;default:return c.getTime()}},ajax:function(a,b,c,d,e,f){var g=new XMLHttpRequest||ActiveXObject("MSXML2.XMLHTTP.3.0");g.open(a,b,!0),e&&g.setRequestHeader("Content-Type","application/json"),f&&g.setRequestHeader("Authorization",f),g.onreadystatechange=function(){g.readyState==4&&(g.status==200&&g.responseText?c(JSON.parse(g.responseText)):d({status:g.status,message:g.statusText}))},g.send(JSON.stringify(e))}};
HTMLElement.prototype.setClass=function(a){this.className=a},HTMLElement.prototype.setAttri=function(a){for(var b in a)this.setAttribute(b,a[b])},HTMLElement.prototype.setStyle=function(a){for(var b in a)this.style[b]=a[b]},HTMLElement.prototype.setStylePrefix=function(a,b){this.style[a]=b;var c=["webkit","Moz","ms","O"];for(var d=c.length;d--;)this.style[c[d]+a[0].toUpperCase()+a.slice(1)]=b},Array.prototype.sortABC=function(a){this.sort(function(b,c){var d=b[a].replace(/Ö/,"Oe").replace(/Ä/,"Ae").replace(/Ü/,"Ue"),e=c[a].replace(/Ö/,"Oe").replace(/Ä/,"Ae").replace(/Ü/,"Ue");return d<e?-1:d>e?1:0})},Array.prototype.sort123=function(a){this.sort(function(b,c){return c[a]-b[a]})},Array.prototype.notIn=function(a,b){return this.filter(function(c){var d=!0;for(var e=0;e<b.length;e++)c[a]==b[e][a]&&(d=!1);return d})},Array.prototype.getObjectInArray=function(a,b){for(var c=0;c<this.length;c++)if(this[c][a]==b)return this[c];return null},Array.prototype.changeItem=function(a,b,c){var d=!1;for(var e=0;e<this.length;e++)this[e]["id"]==a&&(this[e][b]=c,d=!0);return d};
function Node(a){this.server=a}Node.prototype.readActorsByCredential=function(a,b,c){this.query("GET","/authenticate?"+a,b,c)},Node.prototype.readActorByRequestToken=function(a,b,c){this.query("GET","/authorize?requestToken="+a,b,c)},Node.prototype.findActorsForRoleId=function(){},Node.prototype.findActorsForScopeId=function(a,b,c,d){var e="/actors/scopeId/"+a;this.query("GET",e,c,d,null,b)},Node.prototype.findActorForId=function(){},Node.prototype.updateActorById=function(a,b,c,d){var e="/actors/"+a;this.query("PUT",e,c,d,b)},Node.prototype.listActsForAntagonistId=function(a,b,c,d){var e="/acts/antagonistId/"+a;e+=b?"?since="+b:"",this.query("GET",e,c,d)},Node.prototype.createAct=function(a,b,c){var d="/acts";this.query("POST",d,b,c,a)},Node.prototype.readAct=function(){},Node.prototype.updateAct=function(){},Node.prototype.deleteAct=function(a,b,c){var d="/acts/"+a.id;this.query("DELETE",d,b,c)},Node.prototype.actLikeEntity=function(a,b,c,d){var e="/acts/"+a+"/like/"+b;this.query("GET",e,c,d)},Node.prototype.actDislikeEntity=function(a,b,c,d){var e="/acts/"+a+"/dislike/"+b;this.query("GET",e,c,d)},Node.prototype.actClickEntity=function(a,b,c,d){var e="/acts/"+a+"/click/"+b;this.query("GET",e,c,d)},Node.prototype.findEntities=function(){},Node.prototype.findEntitiesById=function(){},Node.prototype.findEvaluationForEntity=function(a,b,c,d){var e="/entities/"+a+"/evaluation/"+b;this.query("GET",e,c,d)},Node.prototype.getDevice=function(a,b,c,d,e,f,g){var h="/logo/"+a+"/"+b;if(c||d||e)h+="?";c&&(h+="since="+c),d&&(h+="&protagonistId="+d),e&&(h+="&antagonistId="+e),this.query("GET",h,f,g)},Node.prototype.list=function(a,b){var c="/master/list";this.query("GET",c,a,b)},Node.prototype.listAtc=function(a,b,c){a=encodeURIComponent(a);var d="/master/"+a;this.query("GET",d,b,c)},Node.prototype.listForm=function(a,b,c){a=encodeURIComponent(a);var d="/master/"+a+"/form";this.query("GET",d,b,c)},Node.prototype.listName=function(a,b,c,d){a=encodeURIComponent(a),b=encodeURIComponent(b);var e="/master/"+a+"/"+b+"/name";this.query("GET",e,c,d)},Node.prototype.listMenge=function(a,b,c,d,e){a=encodeURIComponent(a),b=encodeURIComponent(b),c=encodeURIComponent(c);var f="/master/"+a+"/"+b+"/"+c+"/menge";this.query("GET",f,d,e)},Node.prototype.query=function(a,b,c,d,e,f){util.ajax(a,this.server+b,c,d,e,f)};
(function(a,b,c){function d(c){if(!(this instanceof d))return new d(c);if(typeof c=="string")this.element=b.getElementById(c);else if(c instanceof HTMLElement)this.element=c;else if(c instanceof NodeList)this.element=c;else if(c===a)this.element=a;else{if(c instanceof d)return c;this.element=b}}d.prototype={find:function(a){return DOM(this.element.querySelector(a))},on:function(c,d,e){e=e||{};switch(c){case"touch":c="ontouchstart"in a?"touchstart":"mousedown",this.on(c,d,e);break;case"tap":c="ontouchstart"in a?"touchstart":"mousedown",this.on(c,d,e),c="ontouchmove"in a?"touchmove":"mousemove",this.on(c,d,e),c="ontouchend"in a?"touchend":"mouseup",this.on(c,d,e);break;case"touchstart":function f(a){e.type="start",e.tag=a.touches[0].target.tagName,e.startX=a.touches[0].clientX,e.startY=a.touches[0].clientY,delete e.element;if(e.hasOwnProperty("watch")){var b=e.watch.split(":"),c=a.touches[0].target;c[b[0]]!==b[1]&&(c=c.parentNode,c[b[0]]!==b[1]&&(c=c.parentNode)),c[b[0]]===b[1]&&(e.element=c)}dispatchCommand(d,e)}this.element.addEventListener(c,f);break;case"touchmove":this.element.addEventListener("touchmove",function(a){e.type="move",e.clientX=a.touches[0].clientX,e.clientY=a.touches[0].clientY,dispatchCommand(d,e)});break;case"touchend":this.element.addEventListener("touchend",function(a){e.type="end",dispatchCommand(d,e)});break;case"mousedown":function g(a){a.currentTarget.hasAttribute("href")&&(e.href=a.currentTarget.getAttribute("href")),e.type="start",e.tag=a.target.tagName,e.startX=a.clientX,e.startY=a.clientY,e.offsetX=a.offsetX||a.layerX,e.offsetY=a.offsetY||a.layerY,delete e.element;if(e.hasOwnProperty("watch")){var b=e.watch.split(":"),c=a.target;c[b[0]]!==b[1]&&(c=c.parentNode,c[b[0]]!==b[1]&&(c=c.parentNode)),c[b[0]]===b[1]&&(e.element=c)}dispatchCommand(d,e)}this.element.addEventListener("mousedown",g);break;case"mousemove":this.element.addEventListener("mousemove",function(a){e.type="move",e.clientX=a.clientX,e.clientY=a.clientY,dispatchCommand(d,e)});break;case"mouseup":var h=function(a){e.type="end",dispatchCommand(d,e)};this.element.addEventListener("mouseup",h);break;case"ready":return b.addEventListener("DOMContentLoaded",function(a){a.preventDefault(),dispatchCommand(d,e)},!1),this;case"device":b.addEventListener("deviceready",function(a){a.preventDefault(),dispatchCommand(d,e)},!1);break;case"done":this.element.addEventListener("blur",function(a){e.value=a.target.value,e.target=a.target,dispatchCommand(d,e)},!1);break;case"msg":this.element.addEventListener("message",function(a){a.preventDefault(),e=a.data,e.origin=a.origin,e.source=a.source,dispatchCommand(d,e)},!1);break;case"window":var i=this.prefix("hidden"),j=this.prefix("visibilitychange");for(var k=0;k<i.length;k++)b.addEventListener(j[k],function(){e.hidden=b[i[k]],dispatchCommand(d,e)});break;case"return":this.element.addEventListener("keydown",function(a){a.keyCode==13&&(a.stopPropagation(),a.preventDefault(),e.id=a.target.id,e.value=a.target.value,dispatchCommand(d,e))},!1);break;case"change":function l(a){e.id=a.target.id,e.value=a.target.value,dispatchCommand(d,e)}this.element.addEventListener(c,l,!1),this.element.addEventListener("keyup",l,!1);break;case"load":this.element.addEventListener("load",function(a){dispatchCommand(d,e)},!1);break;case"resume":b.addEventListener("resume",function(a){a.preventDefault(),dispatchCommand(d,e)},!1);break;case"stage":var m=function(a){a.target.className.indexOf("middle")>-1&&(a.preventDefault(),dispatchCommand(d,e))};this.on("transitionend",m);break;case"transitionend":var n=["transitionend","webkitTransitionEnd"];for(var k=0;k<n.length;k++)typeof d=="function"?this.element.addEventListener(n[k],d,!1):this.element.addEventListener(n[k],function(a){dispatchCommand(d,e)},!1)}return this},parent:function(){return DOM(this.element.parentNode)},inherit:function(a){return this.prototype=new a,this},prefix:function(a){var b=["webkit","moz","ms","o",""],c=[];for(var d=0;d<b.length;d++)c.push(b[d]+a.charAt(0).toUpperCase()+a.slice(1));return c},video:function(){return!!b.createElement("video").canPlayType},hash:function(){return a.location.hash.replace("#","")},is:function(a){switch(a){case"browser":case"modern":var b="",c=0;return/(Firefox|Opera|Safari|Chrome|MSIE)[\/\s](\d+)(\.\d+)+/.test(navigator.userAgent)&&(b=RegExp.$1,c=RegExp.$2,b=="Safari"&&/Version\/(\d+)(\.\d+)+/.test(navigator.userAgent)&&(c=RegExp.$1),b=="MSIE"&&(b="Internet Explorer")),{modern:b=="Internet Explorer"&&c>=9||b=="Chrome"&&c>22||b=="Firefox"&&c>=18||b=="Opera"&&c>8||b=="Safari"&&c>=5}}},style:function(a,b){return b!=c?(this.element.style[a]=b,this):this.element.style[a]},show:function(){return this.element.style.display="block",this},hide:function(){return this.element.style.display="none",this},html:function(a){return a!=null?(this.element.innerHTML=a,this):this.element.innerHTML},text:function(a){return a!=null?(this.element.textContent=a,this):this.element.innerText},add:function(a,b,c){var d=typeof a=="string"?this.create(a):a;for(var e in b)d.setAttribute(e,b[e]);return a=="textarea"&&c&&(d.value=c),a!="textarea"&&c&&(d.innerHTML=c),this.element.appendChild(d),DOM(d)},remove:function(){this.element.parentNode.removeChild(this.element)},removeChilds:function(){while(this.element.hasChildNodes())this.element.removeChild(this.element.lastChild);return this},addClass:function(a){return this.element.classList.add(a),this},removeClass:function(a){for(var b=0;b<this.element.length;b++)this.element[b].classList.remove(a);return this},replaceClass:function(a,b){return this.element.className=this.element.className.replace(a,b),this},create:function(a){return b.createElement(a)},addOptions:function(a,c,d,e){var f=b.createDocumentFragment();if(!e)for(var g=a;g<=c;g++){var h=this.create("option");h.textContent=g<10?"0"+g:g,h.value=g,d==g&&(h.selected="selected"),f.appendChild(h)}return this.element.appendChild(f),this},konto:function(a){return this.add("iframe",{src:a,style:"position:fixed; width:100%; height:42px; border:none;"})},attrib:function(a,b){return a&&b!=null?(this.element.setAttribute(a,b),this):this.element.getAttribute(a)},get:function(a){return this.element[a]},set:function(a,b){return this.element[a]=b,this},toggle:function(a,b){this.attrib(a,this.attrib(a)==b[0]?b[1]:b[0])},removeAttrib:function(a){return this.element.removeAttribute(a),this},width:function(a){return a&&this.attrib("width",a),parseInt(this.element.offsetWidth)},height:function(){return parseInt(this.element.offsetHeight)},child:function(a){return DOM(this.element.childNodes[a])},childs:function(){return this.element.childNodes},scrollToIndex:function(a){var b=this.height(),c=this.child(a).height(),d=parseInt(a*c)-b/2+c/2+a%2;this.scrollTo("scrollTop",d,500)},scrollTo:function(a,b,c){function i(a,b,c,d){return a/=d/2,a<1?c/2*a*a+b:(a--,-c/2*(a*(a-2)-1)+b)}var d=this.element[a],e=b-d,f=0,g=20,h=this.element,j=null;j=function(){f+=g;var b=i(f,d,e,c);h[a]=b,f<c&&setTimeout(j,g)},j()},tracking:function(c){var d=[];d.push(["_setAccount","UA-9955206-2"]),d.push(["_setDomainName",c]),d.push(["_trackPageview"]),a._gaq=d,function(){var a=b.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"==b.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var c=b.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c)}()},track:function(a){_gaq.push(["_trackPageview",a])},log:function(a){return console.log(a,this.element),this}},a.DOModule=d.prototype,a.DOM=d})(this,document,undefined);
function Svg(a){return this.element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.element.setAttribute("version","1.1"),this.element.setAttribute("id",a),this.model=new Model,this.paddingLeft=20,this.paddingRight=20,this.paddingTop=50,this.paddingBottom=50,this.minX=0,this.maxX=0,this.maxXRealtime=0,this.minY=0,this.maxY=100,this.chartWidth=0,this.scrollLeft=0,this}Svg.prototype.setContainer=function(a){document.getElementById(a).appendChild(this.element)},Svg.prototype.refresh=function(){this.removeElements(),this.drawCoordinates(),this.drawPunkte()},Svg.prototype.removeElements=function(){while(this.element.hasChildNodes())this.element.removeChild(this.element.lastChild)},Svg.prototype.drawCoordinates=function(){var a=864e5;this.minX=this.model.getMinX(),this.maxXRealtime=util.zeit()+432e5,this.maxX=Math.floor(this.maxXRealtime/a)*a;var b=this.getPixelForX(this.maxXRealtime,!0)+this.paddingRight;this.element.setAttribute("width",b),this.element.setAttribute("height",this.getPixelForY(this.minY,!0)+this.paddingBottom),this.drawKoordLine(util.zeit(),this.minY-5,util.zeit(),this.maxY+5,"rgba(220,220,220,0.4)");for(var c=this.minX;c<=this.maxXRealtime;c+=864e5){var d=this.maxXRealtime-864e5>c?a:this.maxXRealtime-c;this.drawWeekend(c,this.maxY,this.minX+d,this.minY),this.drawKoordLine(c,this.minY,c,this.maxY,"rgba(255,255,255,0.6)"),this.maxXRealtime>c+576e5&&this.drawLabelX(c,this.minY)}for(var e=0;e<=this.maxY;e+=20)this.drawKoordLine(this.minX,e,this.maxXRealtime,e,"rgba(255,255,255,0.6)");var f=this.element.parentNode.clientWidth;this.element.parentNode.scrollLeft==0&&(this.element.parentNode.scrollLeft=b-f),this.chartWidth=b},Svg.prototype.drawWeekend=function(a,b,c,d){var e=new Date(a);if(e.getDay()==6||e.getDay()==0){var f=this.getPixelForX(a,!0),g=this.getPixelForY(b,!0),h=this.getPixelForX(c,!1),i=this.getPixelForY(d,!1),j=document.createElementNS("http://www.w3.org/2000/svg","rect");j.setAttribute("x",f),j.setAttribute("y",g),j.setAttribute("width",h),j.setAttribute("height",i),j.setAttribute("fill","rgba(255,255,255,0.3)"),this.element.appendChild(j)}},Svg.prototype.drawLabelX=function(a,b){var c=this.getPixelForX(a,!0)+20,d=this.getPixelForY(b,!0)-10,e=document.createElementNS("http://www.w3.org/2000/svg","text");e.setAttribute("x",c),e.setAttribute("y",d),e.setAttribute("fill","rgba(255,255,255,0.7)"),e.textContent=util.zeit("dd",a)+"."+util.zeit("MM",a),this.element.appendChild(e)},Svg.prototype.drawPunkte=function(a){var b=this.model._data.acts.slice(0),c=dots2=b.length,d=null;while(c--){var e={id:b[c].entitiesId,x:b[c].zeit,y:b[c].wert};e.id=="diagnose"&&this.drawNotizen(e)}while(dots2--){var e={id:b[dots2].entitiesId,x:b[dots2].zeit,y:b[dots2].wert};if(e.id=="diagnose")continue;e.id=="privat"||e.id=="zyklus"?this.drawNotizen(e):e.id=="weight"||e.id=="bp"||e.id=="temperatur"||e.id=="stepcounter"||e.id=="oximeter"?this.drawDevice(e):(this.drawLine(e,d,19),this.drawPunkt(e),d={id:e.id,x:e.x,y:e.y})}delete b},Svg.prototype.drawDevice=function(a){var b=typeof a.y=="string"?JSON.parse(a.y):a.y,c=0;a.id=="weight"&&(c=b.weight),a.id=="stepcounter"&&(c=b.step),a.id=="bp"&&(c=b.systolic),c-=this.model.getType(a.id).min,c=100/this.model.getType(a.id).max*c+3;var d=this.getFarbwert(a.id),e=this.getPixelForX(a.x,!0),f=document.createElementNS("http://www.w3.org/2000/svg","rect");f.setAttribute("class","movePoint"),f.setAttribute("x",e-6),f.setAttribute("y",this.getPixelForY(c,!0)),f.setAttribute("width",20),f.setAttribute("height",20),f.setAttribute("fill",d),f.setAttribute("stroke","rgba(255,255,255,1)"),f.setAttribute("stroke-width","2"),DOM(f).onTouch(Events.HOME_VERLAUF_SELECTED,a),this.element.appendChild(f)},Svg.prototype.drawNotizen=function(a){var b=0,c=0;a.id=="privat"&&(b=-1,c=110),a.id=="zyklus"&&(b=116,c=110),a.id=="diagnose"&&(b=99,c=27);var d=this.getFarbwert(a.id),e=this.getPixelForX(a.x,!0),f=document.createElementNS("http://www.w3.org/2000/svg","rect");f.setAttribute("class","movePoint"),f.setAttribute("x",e-15),f.setAttribute("y",this.getPixelForY(b,!0)),f.setAttribute("width",26),f.setAttribute("height",this.getPixelForY(c,!0)),f.setAttribute("fill",d),f.setAttribute("stroke","rgba(255,255,255,1)"),f.setAttribute("stroke-width","2"),DOM(f).onTouch(Events.HOME_VERLAUF_SELECTED,a),this.element.appendChild(f)},Svg.prototype.drawLine=function(a,b,c){var d=864e5;if(!a||!b)return;if(b.id!==a.id)return;if(a.x>b.x+d*3)return;var e=Number(this.getPixelForX(b.x,!0)),f=Number(this.getPixelForY(b.y,!0)),g=Number(this.getPixelForX(a.x,!0)),h=Number(this.getPixelForY(a.y,!0)),i=this.getFarbwert(a.id),j=this.getPaddingFromPoint(e,f,g,h,c);e+=j.x,g-=j.x,f+=j.y,h-=j.y;var k=document.createElementNS("http://www.w3.org/2000/svg","line");k.setAttribute("transform","translate(0 0)"),k.setAttribute("fill",i),k.setAttribute("stroke",i),k.setAttribute("stroke-width","4"),k.setAttribute("x1",e),k.setAttribute("y1",f),k.setAttribute("x2",g),k.setAttribute("y2",h),this.element.appendChild(k)},Svg.prototype.getPaddingFromPoint=function(a,b,c,d,e){var f=c-a,g=d-b>=0?d-b:b-d,h=Math.atan2(g,f),i=Math.cos(h)*e,j=Math.sin(h)*e;return d<b&&(j=-1*j),{x:i,y:j}},Svg.prototype.drawKoordLine=function(a,b,c,d,e){a=this.getPixelForX(a,!0),c=this.getPixelForX(c,!0),b=this.getPixelForY(b,!0),d=this.getPixelForY(d,!0);var f=document.createElementNS("http://www.w3.org/2000/svg","line");f.setAttribute("stroke",e),f.setAttribute("stroke-width","2"),f.setAttribute("x1",a),f.setAttribute("y1",b),f.setAttribute("x2",c),f.setAttribute("y2",d),this.element.appendChild(f)},Svg.prototype.drawPunkt=function(a){var b=this.getPixelForX(a.x,!0),c=this.getPixelForY(this.maxY,!0),d=this.getPixelForY(a.y,!1),e=this.getFarbwert(a.id),f=document.createElementNS("http://www.w3.org/2000/svg","circle");f.setAttribute("transform","translate(0 "+d+")"),f.setAttribute("class","movePoint"),f.setAttribute("stroke","rgba(255,255,255,1)"),f.setAttribute("r","17"),f.setAttribute("fill",e),f.setAttribute("stroke-width","2"),f.setAttribute("cx",b),f.setAttribute("cy",c),DOM(f).onTouch(Events.HOME_VERLAUF_SELECTED,a),this.element.appendChild(f)},Svg.prototype.getPixelForX=function(a,b){var c=this.paddingLeft;b||(c=0);var d=parseInt(1e-6*(a-this.minX));return Math.floor(c+d)},Svg.prototype.getXForPixel=function(a,b){var c=this.paddingLeft;b||(c=0);var d=a-c;return parseInt(d/1e-6)+this.minX},Svg.prototype.getPixelForY=function(a,b){var c=this.paddingTop;b||(c=0);var d=parseInt(2*(this.maxY-a));return Math.floor(c+d)},Svg.prototype.getYForPixel=function(a,b){var c=this.paddingTop;b||(c=0);var d=a-c;return this.maxY-parseInt(d/2)},Svg.prototype.getFarbwert=function(a){return this.model.getType(a).farbwert},Svg.prototype.getLegende=function(a,b){a-=20;var c=document.createElementNS("http://www.w3.org/2000/svg","polygon");c.id="box",c.setAttribute("visibility","hidden"),c.setAttribute("zIndex","10"),c.setAttribute("fill","rgba(100,100,100,0.8)"),c.setAttribute("stroke","rgba(204,204,204,0.8)");var d=a+","+b,e=a-15+","+(b-15),f=a-15+","+(b-30),g=a-200+","+(b-30),h=a-200+","+(b+100),i=a-15+","+(b+100),j=a-15+","+(b+15);c.setAttribute("visibility","visible"),c.setAttribute("points",d+" "+e+" "+f+" "+g+" "+h+" "+i+" "+j);var k=document.createElementNS("http://www.w3.org/2000/svg","text");k.setAttribute("visibility","hidden"),k.setAttribute("color","white"),k.setAttribute("fill","white"),k.setAttribute("font-size","1.2em"),svg.appendChild(k)};
function Agent(){this.device="Unknown",this.os="Unknown",this.browser="Unknown",this.version=0,this.can=[],this.parse()}Agent.prototype.parse=function(){/iPhone/i.test(navigator.userAgent)&&(this.device="Mobile"),/iPad/i.test(navigator.userAgent)&&(this.device="Tablet"),/Android/i.test(navigator.userAgent)&&(this.device=/Android.*Mobile/i.test(navigator.userAgent)?"Mobile":"Tablet"),/BlackBerry/i.test(navigator.userAgent)&&(this.device="Mobile",this.os="RIM"),/PlayBook/i.test(navigator.userAgent)&&(this.device="Tablet",this.os="RIM"),/Kindle|Kindle Fire/i.test(navigator.userAgent)&&(this.device="Tablet"),/Opera Mobi/i.test(navigator.userAgent)&&(this.device="Mobile"),/Windows Phone/i.test(navigator.userAgent)&&(this.device="Mobile",this.os="Windows"),/IEMobile/i.test(navigator.userAgent)&&(this.device="Mobile",this.os="Windows"),/MeeGo/i.test(navigator.userAgent)&&(this.device="Mobile"),/(nuhk)|(GoogleBot)|(YammyBot)|(OpenBot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/i.test(navigator.userAgent)&&(this.device="Bot"),/Firefox[\/\s](\d+)(\.\d+)+/.test(navigator.userAgent)&&(this.browser="Firefox",this.version=new Number(RegExp.$1)),/MSIE (\d+)(\.\d+)+;/.test(navigator.userAgent)&&(this.browser="Internet Explorer",this.version=new Number(RegExp.$1)),/Opera[\/\s](\d+)(\.\d+)+/.test(navigator.userAgent)&&(this.browser="Opera",this.version=new Number(RegExp.$1)),/Safari/.test(navigator.userAgent)&&(this.browser="Safari",/Version\/(\d+)(\.\d+)+/.test(navigator.userAgent)&&(this.version=new Number(RegExp.$1))),/Chrome[\/\s](\d+)(\.\d+)+/.test(navigator.userAgent)&&(this.browser="Chrome",this.version=new Number(RegExp.$1)),this.device=="Unknown"&&(/Windows NT (\d\.)/i.test(navigator.userAgent)&&(this.os="Windows",this.device="Desktop"),/(Linux)|(X11)/.test(navigator.userAgent)&&(this.os="Linux",this.device="Desktop"),/(Mac_PowerPC)|(Macintosh)|(Mac OS)/i.test(navigator.userAgent)&&(this.os="Mac OS",this.device="Desktop"));if(navigator.mimeTypes&&navigator.mimeTypes.length){var a=navigator.mimeTypes["application/x-shockwave-flash"];a&&a.enabledPlugin&&this.can.push("Flash")}!document.createElement("video").canPlayType||this.can.push("HTML5")},Agent.prototype.capable=function(a){var b=this.can.length;while(b--)if(this.can[b]===a)return!0;return!1},Agent.prototype.isDevice=function(a){return this.device===a},Agent.prototype.isLandscape=function(){return this.isDevice("Mobile")&&document.documentElement.clientWidth>document.documentElement.clientHeight};
var Assets={busy:function(a){var b=document.createElement("div");for(var c=0;c<12;c++){var d=document.createElement("div");d.className="spinner",this.setStylePrefix(d,"transform","rotate("+c*30+"deg) translate(0, -120%)"),c==0?this.setStylePrefix(d,"animationDelay","0s"):this.setStylePrefix(d,"animationDelay",c/12+"s"),b.appendChild(d)}return b},busyDiv:function(a){var b=document.createElement("div");return b.setAttribute("id",a),b.style.display="none",b.style.position="absolute",b.style.left="50%",b.style.top="50%",b.style.width="100px",b.style.height="100px",b.style["margin-left"]="-50px",b.style["margin-top"]="-50px",b.appendChild(this.busy()),b},error:function(){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","0 0 60 60"),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("version","1.1");var b=document.createElementNS("http://www.w3.org/2000/svg","circle");b.setAttribute("fill","rgba(255,55,55,0.6)"),b.setAttribute("stroke","#FFFFFF"),b.setAttribute("stroke-width","0"),b.setAttribute("cx","30"),b.setAttribute("cy","30"),b.setAttribute("r","27"),a.appendChild(b);var c=document.createElementNS("http://www.w3.org/2000/svg","polygon");return c.setAttribute("fill","rgba(255,255,255,0.8)"),c.setAttribute("points","15,15 20,15 30,25 40,15 45,15 45,20 35,30 45,40 45,45 40,45 30,35 20,45 15,45 15,40 25,30 15,20 15,15"),a.appendChild(c),a},caret:function(){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","0 0 60 60"),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("version","1.1");var b=document.createElementNS("http://www.w3.org/2000/svg","polyline");return b.setAttribute("stroke","rgba(150,150,150,1)"),b.setAttribute("stroke-width","10"),b.setAttribute("fill","none"),b.setAttribute("points","15,5 45,30 15,55"),a.appendChild(b),a},antiCaret:function(){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","0 0 60 60"),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("version","1.1");var b=document.createElementNS("http://www.w3.org/2000/svg","polyline");return b.setAttribute("stroke","rgba(150,150,150,1)"),b.setAttribute("stroke-width","10"),b.setAttribute("fill","none"),b.setAttribute("points","45,5 15,30 45,55"),a.appendChild(b),a},play:function(){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","0 0 60 60"),a.setAttribute("width","100%"),a.setAttribute("height","100%");var b=document.createElementNS("http://www.w3.org/2000/svg","path");return b.setAttribute("fill","rgba(255,255,255,1)"),b.setAttribute("stroke","rgba(204,204,204,0.8)"),b.setAttribute("stroke-width","1"),b.setAttribute("d","M 15 30 L 15 15 C 15 5, 20 6, 25 10 L 45 25 C 50 28, 50 32, 45 35 L 25 50 C 20 55, 15 54, 15 45 L 15 30 Z"),a.appendChild(b),a},close:function(a){var b=document.createElementNS("http://www.w3.org/2000/svg","svg");b.setAttribute("viewBox","0 0 60 60"),b.setAttribute("width",a+"%"),b.setAttribute("height",a+"%"),b.style.position="absolute",b.style.right=-0.4*a+"%",b.style.top=-0.4*a+"%";var c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.setAttribute("fill","rgba(105,105,105,0.8)"),c.setAttribute("stroke","#FFFFFF"),c.setAttribute("stroke-width","6"),c.setAttribute("cx","30"),c.setAttribute("cy","30"),c.setAttribute("r","27"),b.appendChild(c);var d=document.createElementNS("http://www.w3.org/2000/svg","polygon");return d.setAttribute("fill","rgba(100,100,100,0.8)"),d.setAttribute("stroke","#FFFFFF"),d.setAttribute("stroke-width","8"),d.setAttribute("points","15,45 30,30 15,15 30,30 45,15 30,30 45,45 30,30"),b.appendChild(d),b},fullScreen:function(){function c(a){a.target.setAttributeNS(null,"x","10"),a.target.setAttributeNS(null,"y","10"),a.target.setAttributeNS(null,"width","40"),a.target.setAttributeNS(null,"height","40")}function d(a){a.target.setAttributeNS(null,"x","15"),a.target.setAttributeNS(null,"y","15"),a.target.setAttributeNS(null,"width","30"),a.target.setAttributeNS(null,"height","30")}var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","0 0 60 60"),a.setAttribute("width","100%"),a.setAttribute("height","100%");var b=document.createElementNS("http://www.w3.org/2000/svg","rect");return b.setAttribute("fill","rgba(100,100,100,0.8)"),b.setAttribute("stroke","#CCCCCC"),b.setAttribute("stroke-width","2"),b.setAttribute("x","15"),b.setAttribute("y","15"),b.setAttribute("width","30"),b.setAttribute("height","30"),b.addEventListener("mouseover",c,!1),b.addEventListener("mouseout",d,!1),a.appendChild(b),a},pause:function(){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","0 0 60 60"),a.setAttribute("width","100%"),a.setAttribute("height","100%");var b=document.createElementNS("http://www.w3.org/2000/svg","rect");b.setAttribute("fill","rgba(100,100,100,0.8)"),b.setAttribute("stroke","#CCCCCC"),b.setAttribute("stroke-width","2"),b.setAttribute("x","5"),b.setAttribute("y","10"),b.setAttribute("width","20"),b.setAttribute("height","40"),a.appendChild(b);var c=document.createElementNS("http://www.w3.org/2000/svg","rect");return c.setAttribute("fill","rgba(100,100,100,0.8)"),c.setAttribute("stroke","#CCCCCC"),c.setAttribute("stroke-width","2"),c.setAttribute("x","35"),c.setAttribute("y","10"),c.setAttribute("width","20"),c.setAttribute("height","40"),a.appendChild(c),a},likes:function(a){var b=document.createElementNS("http://www.w3.org/2000/svg","svg");b.setAttribute("viewBox","0 0 70 50"),b.setAttribute("width","100%"),b.setAttribute("height","100%");var c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("fill","rgba(255,255,255,0.9)"),c.setAttribute("stroke","rgba(204,204,204,0.8)"),c.setAttribute("stroke-width","2"),c.setAttribute("d","M23,8 L23,12 28,24 34,24 36,31 34,38 30,38 24,42 18,43C18,43 12,41 15,38 C15,38 10,36 14,32 C14,32  8,30 13,26 C13,26  6,19 20,21C20,21 14,6  21,8z"),b.appendChild(c);if(a>0){var d=document.createElementNS("http://www.w3.org/2000/svg","text");d.setAttribute("id","like"),d.setAttribute("x","28"),d.setAttribute("y","20"),d.setAttribute("font-family","Verdana"),d.setAttribute("font-size","12"),d.setAttribute("fill","rgba(204,204,204,0.8)"),d.textContent="+"+a,b.appendChild(d)}return b},getIcon:function(a,b){var c=document.createElement("img");return c.src="img/icon/"+a+".png",c.width=b,c.height=b,c},setStylePrefix:function(a,b,c){var d=["Webkit","Moz","Ms","O"];d.forEach(function(d){a.style[d+b[0].toUpperCase()+b.slice(1)]=c}),a.style[b]=c}};
